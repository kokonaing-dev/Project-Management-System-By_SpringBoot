<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.thymeleaf.org ">


<!-- Mirrored from coderthemes.com/jidox/layouts/ui-tabs.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 01 Feb 2024 20:00:59 GMT -->
<head>
  <meta charset="utf-8" />
  <title>Tabs </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
  <meta content="Coderthemes" name="author" />

  <!-- App favicon -->
  <link rel="shortcut icon" href="/images/favicon.ico">

  <!-- Theme Config Js -->
  <script src="/js/config.js"></script>

  <!-- App css -->
  <link href="/css/app.min.css" rel="stylesheet" type="text/css" id="app-style" />

  <!-- Icons css -->
  <link href="/css/icons.min.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.1.0/remixicon.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.1.0/remixicon.min.css">

  <!-- Include SweetAlert2 CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11">

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Datatables css -->
    <link href="/libs/datatables.net-bs5/css/dataTables.bootstrap5.min.css" rel="stylesheet" type="text/css" />
    <link href="/libs/datatables.net-responsive-bs5/css/responsive.bootstrap5.min.css" rel="stylesheet" type="text/css" />
    <link href="/libs/datatables.net-fixedcolumns-bs5/css/fixedColumns.bootstrap5.min.css" rel="stylesheet" type="text/css" />
    <link href="/libs/datatables.net-fixedheader-bs5/css/fixedHeader.bootstrap5.min.css" rel="stylesheet" type="text/css" />
    <link href="/libs/datatables.net-buttons-bs5/css/buttons.bootstrap5.min.css" rel="stylesheet" type="text/css" />
    <link href="/libs/datatables.net-select-bs5/css/select.bootstrap5.min.css" rel="stylesheet" type="text/css" />

</head>

<body>
    <!-- Begin page -->
    <div class="wrapper">


      <!-- ========== Topbar Start ========== -->
      <div th:insert="~{/top-bar :: top-bar}">  </div>
      <!-- ========== Topbar End ========== -->

      <!-- ========== Left Sidebar Start ========== -->
<!--      <div th:insert="~{/topnav-menu :: topnav}"> </div>-->
      <!-- ========== Left Sidebar End ========== -->

        <!-- ========== Left Sidebar Start ========== -->
        <div th:insert="~{/leftside-menu :: leftside-menu}"></div>
        <!-- ========== Left Sidebar End ========== -->

      <!-- ============================================================== -->
      <!-- Start Page Content here -->
      <!-- ============================================================== -->

      <div class="content-page">
        <div class="content">

          <!-- Start Content-->
          <div class="container-fluid">
              <!-- start page title -->
              <div class="row">
                  <div class="col-12">
                      <div class="page-title-box justify-content-between d-flex align-items-md-center flex-md-row flex-column">
                          <h3 class="page-title fw-bold"><i class="ri-settings-5-fill"></i>Setting</h3>
                          <ol class="breadcrumb m-0">
                              <li class="breadcrumb-item"><a href="/dashboard">Home</a></li>
                              <li class="breadcrumb-item active">Setting</li>
                          </ol>
                      </div>
                  </div>
              </div>
              <!-- end page title -->

            <div class="row d-flex justify-content-center">
              <div class="col-xl-9">
                <div class="card">
                  <div class="card-body">
                    <div class="row">
                      <div class="col-sm-2 mb-2 mb-sm-0">
                        <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                            <a class="nav-link active show" id="v-pills-issue-tab" data-bs-toggle="pill" href="#ListIssueType" role="tab" aria-controls="v-pills-issue"
                             aria-selected="true">
                                Issue Types
                            </a>
                            <a class="nav-link" id="v-pills-cate-tab" data-bs-toggle="pill" href="#Categories" role="tab" aria-controls="v-pills-cate"
                             aria-selected="false">
                                Categories
                            </a>
                            <a class="nav-link" id="v-pills-user-tab" data-bs-toggle="pill" href="#Deactived" role="tab" aria-controls="v-pills-user"
                               aria-selected="false"  th:if="${#authorization.expression('hasRole(''ROLE_SYSTEM_ADMIN'')')}">
                                Deactivate Users List
                            </a>

                        </div>
                      </div> <!-- end col-->

                      <div class="col-sm-10">
                        <div class="tab-content" id="v-pills-tabContent">

                            <div class="tab-pane fade active show" id="ListIssueType" role="tabpanel" aria-labelledby="v-pills-issue-tab">
                                <div class="row">
                                    <div class="col-xl-6">
                                        <h4 class="header-title mb-2">Edit Issue Types</h4>
                                        <button type="button" class="btn btn-sm btn-soft-success rounded-pill" data-bs-toggle="modal" data-bs-target="#bs-example-modal-sm">Add Issue Type</button>

                                        <div class="table-responsive-sm">
                                          <table class="table table-centered mb-0">
                                            <thead>
                                              <tr>
                                                <th>List of Issue Type</th>
                                                <th>Delete</th>
                                              </tr>
                                            </thead>
                                            <tbody>
                                              <tr th:each="issueType : ${issueTypes}" th:id="'issueTypeRow-' + ${issueType.id}">
                                                <td th:text="${issueType.issueName}"></td>
                                                <td><i class="ri-close-line" th:attr="data-issueTypeId=${issueType.id}" onclick="deleteIssueType(this)"></i></td>
                                              </tr>
                                            </tbody>
                                          </table>
                                        </div> <!-- end table-responsive-->
                                    </div><!-- end col-->
                                </div>
                            </div>

                            <div class="tab-pane fade" id="Categories" role="tabpanel" aria-labelledby="v-pills-cate-tab">
                                <div class="row">
                                    <div class="col-xl-6">
                                        <h4 class="header-title mb-2">Edit Categories</h4>
                                        <button type="button" class="btn btn-sm btn-soft-success rounded-pill" data-bs-toggle="modal" data-bs-target="#categories-modal">Add Categories</button>

                                        <div class="table-responsive-sm">
                                            <table class="table table-centered mb-0">
                                                <thead>
                                                <tr>
                                                    <th>List of Categories</th>
                                                    <th>Delete</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr th:each="category : ${categories}" th:id="'categoryRow-' + ${category.id}">
                                                    <td th:text="${category.categoryName}"></td>
                                                    <td><i class="ri-close-line" th:attr="data-categoryId=${category.id}" onclick="deleteCategory(this)"></i></td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div> <!-- end table-responsive-->
                                    </div><!-- end col-->
                                </div>
                            </div>

                            <div class="tab-pane fade" id="Deactived" role="tabpanel" aria-labelledby="v-pills-user-tab">
                                <div class="row">
                                    <div class="col-xl-10">
                                        <h4 class="header-title mb-2">Deactivate Users</h4>
                                        <div class="table-responsive-sm">
                                            <table id="fixed-columns-datatable" class="table table-striped nowrap row-border w-100">
                                                <thead>
                                                    <tr>
                                                        <th>No</th>
                                                        <th>Username</th>
                                                        <th>Email</th>
                                                        <th>Action</th>
                                                    </tr>

                                                </thead>
                                                <tbody>
                                                    <!-- Iterate over inactiveUsers and display them in table rows -->
                                                    <tr th:each="user, iterStat : ${inactiveUsers}">
                                                        <td th:text="${iterStat.count}"></td>
                                                        <td th:text="${user.username}"></td>
                                                        <td th:text="${user.email}"></td>
                                                        <td>
                                                            <button class="btn btn-soft-success" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="Active">
                                                                <i class="ri-check-fill"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>



                        </div> <!-- end tab-content-->
                      </div> <!-- end col-->
                    </div>
                    <!-- end row-->

                  <!-- Modal Add issue categories-->
                      <div class="modal fade" id="categories-modal" tabindex="-1" aria-labelledby="mySmallModalLabel" aria-hidden="true">
                          <div class="modal-dialog modal-sm">
                              <div class="modal-content">
                                  <form id="add-issue-categories-form" method="post">
                                      <div class="modal-header">
                                          <h4 class="modal-title" id="categorieslabel">Add Issue Types</h4>
                                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                      </div>
                                      <div class="modal-body">

                                          <div class="mb-3">
                                              <label for="categoryName" class="col-form-label">Type:</label>
                                              <input type="text" class="form-control" id="categoryName" name="categoryName" placeholder="Enter category name">
                                          </div>
                                          <!-- Add more form fields if needed -->
                                      </div>
                                      <div class="modal-footer">
                                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                          <button type="button" id="addCategoryBtn" class="btn btn-primary">Add</button>
                                      </div>
                                  </form>
                              </div>
                          </div>
                      </div>

                      <!-- Modal Add issue type-->
                      <div class="modal fade" id="bs-example-modal-sm" tabindex="-1" aria-labelledby="mySmallModalLabel" aria-hidden="true">
                          <div class="modal-dialog modal-sm">
                              <div class="modal-content">
                                  <form id="add-issue-type-form" action="#" method="post">
                                      <div class="modal-header">
                                          <h4 class="modal-title" id="mySmallModalLabel">Add Issue Types</h4>
                                          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                      </div>
                                      <div class="modal-body">
                                          <div class="mb-3">
                                              <label for="issue-type" class="col-form-label">Type:</label>
                                              <input type="text" class="form-control" id="issue-type" name="issueName" placeholder="Enter issue type name">
                                          </div>
                                          <!-- Add more form fields if needed -->
                                      </div>
                                      <div class="modal-footer">
                                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                          <button type="button" id="addIssueTypeBtn" class="btn btn-primary">Add</button>
                                      </div>
                                  </form>
                              </div>
                          </div>
                      </div>
                  </div> <!-- end card-body -->
                </div> <!-- end card-->
              </div> <!-- end col -->
            </div>

          </div>
        </div>
      </div>

    </div>

    <script>

        $(document).ready(function() {
            $('#userTable').DataTable({
                "paging": true,        // Enable paging
                "searching": true,     // Enable searching/filtering
                // You can add more options here as per your requirements
            });
        });


        function deleteIssueType(icon) {
            var issueTypeId = icon.getAttribute("data-issueTypeId");

            // Show SweetAlert2 confirmation dialog
            Swal.fire({
                title: "Are you sure?",
                text: "You won't be able to revert this!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Yes, delete it!",
            }).then((result) => {
                if (result.isConfirmed) {
                    // User confirmed deletion, send AJAX request
                    $.ajax({
                        type: "DELETE",
                        url: "/deleteIssueType/" + issueTypeId,
                        success: function () {
                            // Remove the corresponding row from the table
                            var rowId = "issueTypeRow-" + issueTypeId;
                            $("#" + rowId).remove();
                            // Show success message
                            Swal.fire("Deleted!", "Your issue type has been deleted.", "success");
                        },
                        error: function (xhr, status, error) {
                            console.error("Error deleting issue type:", error);
                            // Show error message
                            Swal.fire("Error", "Failed to delete issue type. Please try again later.", "error");
                        },
                    });
                }
            });
        }

        function deleteCategory(icon) {
            var categoryId = icon.getAttribute("data-categoryId");

            // Show SweetAlert2 confirmation dialog
            Swal.fire({
                title: "Are you sure?",
                text: "You won't be able to revert this!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Yes, delete it!",
            }).then((result) => {
                if (result.isConfirmed) {
                    // User confirmed deletion, send AJAX request
                    $.ajax({
                        type: "DELETE",
                        url: "/deleteCategory/" + categoryId,
                        success: function () {
                            // Remove the corresponding row from the table
                            var rowId = "categoryRow-" + categoryId;
                            $("#" + rowId).remove();
                            // Show success message
                            Swal.fire("Deleted!", "Your category has been deleted.", "success");
                        },
                        error: function (xhr, status, error) {
                            console.error("Error deleting category:", error);
                            // Show error message
                            Swal.fire("Error", "Failed to delete category. Please try again later.", "error");
                        },
                    });
                }
            });
        }


        document.getElementById('addCategoryBtn').addEventListener('click', function () {
            // Submit the form using AJAX
            $.ajax({
                type: 'POST',
                url: '/saveIssueCategories',
                data: $('#add-issue-categories-form').serialize(), // Serialize form data
                success: function (response) {
                    // Close the modal
                    $('#categories-modal').modal('hide');
                    // Clear form fields if needed
                    $('#add-issue-categories-form')[0].reset();
                    // Show success message
                    Swal.fire({
                        title: 'Added!',
                        text: 'Your category has been added.',
                        icon: 'success',
                        showCancelButton: false,
                        confirmButtonColor: '#3085d6',
                        confirmButtonText: 'OK'
                    }).then((result) => {
                        // Reload the window
                        location.reload();
                    });
                },
                error: function (xhr, status, error) {
                    console.error('Error adding category:', error);
                    // Show error message
                    Swal.fire('Error', 'Failed to add category. Please try again later.', 'error');
                }
            });
        });


        document.getElementById('addIssueTypeBtn').addEventListener('click', function () {
            // Submit the form using AJAX
            $.ajax({
                type: 'POST',
                url: '/saveIssueType',
                data: $('#add-issue-type-form').serialize(), // Serialize form data
                success: function (response) {
                    // Close the modal
                    $('#bs-example-modal-sm').modal('hide');
                    // Clear form fields if needed
                    $('#add-issue-type-form')[0].reset();
                    // Show success message
                    Swal.fire({
                        title: 'Added!',
                        text: 'Your issue type has been added.',
                        icon: 'success',
                        showCancelButton: false,
                        confirmButtonColor: '#3085d6',
                        confirmButtonText: 'OK'
                    }).then((result) => {
                        // Reload the window
                        location.reload();
                        // Switch to the category tab panel
                        $('#v-pills-tab a[href="#Categories"]').tab('show');
                    });
                },
                error: function (xhr, status, error) {
                    console.error('Error adding issue type:', error);
                    // Show error message
                    Swal.fire('Error', 'Failed to add issue type. Please try again later.', 'error');
                }
            });
        });



    </script>



    <!-- Vendor js -->
    <script src="/js/vendor.min.js"></script>

    <!-- Datatables js -->
    <script src="/libs/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="/libs/datatables.net-bs5/js/dataTables.bootstrap5.min.js"></script>
    <script src="/libs/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
    <script src="/libs/datatables.net-responsive-bs5/js/responsive.bootstrap5.min.js"></script>
    <script src="/libs/datatables.net-fixedcolumns-bs5/js/fixedColumns.bootstrap5.min.js"></script>
    <script src="/libs/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js"></script>
    <script src="/libs/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
    <script src="/libs/datatables.net-buttons-bs5/js/buttons.bootstrap5.min.js"></script>
    <script src="/libs/datatables.net-buttons/js/buttons.html5.min.js"></script>
    <script src="/libs/datatables.net-buttons/js/buttons.flash.min.js"></script>
    <script src="/libs/datatables.net-buttons/js/buttons.print.min.js"></script>
    <script src="/libs/datatables.net-keytable/js/dataTables.keyTable.min.js"></script>
    <script src="/libs/datatables.net-select/js/dataTables.select.min.js"></script>

    <!-- Datatable Demo Aapp js -->
    <script src="/js/pages/demo.datatable-init.js"></script>



    <!-- App js -->
    <script src="/js/app.min.js"></script>



</body>
</html>
